{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Huawe\\u0131\\\\VS_CODE\\\\film-dizi-oneri-sitesi-main\\\\film-dizi-oneri-sitesi-main\\\\Frontend\\\\src\\\\components\\\\AuthForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/AuthForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthForm = () => {\n  _s();\n  const [isLogin, setIsLogin] = useState(true);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [bgGif, setBgGif] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    const gifList = [\"https://i.gifer.com/3Yws.gif\", \"https://i.gifer.com/YCZX.gif\", \"https://i.gifer.com/origin/34/34f7fc2208fc7ed7b53b4b12d7858f3a.gif\", \"https://media.giphy.com/media/xT0GqeSlGSRQut4jD6/giphy.gif\", \"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif\", \"https://media.giphy.com/media/JWuBH9rCO2uZuHBFpm/giphy.gif\", \"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif\", \"https://media.giphy.com/media/q7Up7ioB3Uqzq/giphy.gif\"];\n    const randomGif = gifList[Math.floor(Math.random() * gifList.length)];\n    document.documentElement.style.setProperty(\"--bg-gif\", `url(${randomGif})`);\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const endpoint = isLogin ? \"login\" : \"register\";\n    try {\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const data = await res.json();\n      if (!res.ok) {\n        alert(data.error || \"Bir hata oluştu.\");\n        return;\n      }\n      if (!isLogin) {\n        alert(\"Kayıt başarılı! Giriş yapabilirsiniz.\");\n        setIsLogin(true);\n        return;\n      }\n      localStorage.setItem(\"token\", data.token);\n\n      // Kullanıcı verisini çek\n      const userRes = await fetch(`${process.env.REACT_APP_API_URL}/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const user = await userRes.json();\n      if (!user.preference || Object.values(user.preference).every(val => val === 0)) {\n        navigate(\"/choose-films\");\n      } else {\n        navigate(\"/home\");\n      }\n    } catch (err) {\n      console.error(\"🛑 Yakalanan hata:\", err);\n      alert(\"Sunucu hatası: \" + err.message);\n    }\n    setUsername(\"\");\n    setPassword(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-body\",\n    style: {\n      background: `url(${bgGif}) no-repeat center center fixed`,\n      backgroundSize: \"cover\",\n      minHeight: \"100vh\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: isLogin ? \"Giriş Yap\" : \"Kayıt Ol\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Kullan\\u0131c\\u0131 Ad\\u0131\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"\\u015Eifre\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: isLogin ? \"Giriş Yap\" : \"Kayıt Ol\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [isLogin ? \"Hesabınız yok mu?\" : \"Zaten hesabınız var mı?\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setIsLogin(!isLogin),\n          style: {\n            color: \"#00ffff\",\n            cursor: \"pointer\"\n          },\n          children: isLogin ? \"Kayıt Ol\" : \"Giriş Yap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthForm, \"vMPvMgy2mqByX+Y4dw84DbEkikE=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthForm;\nexport default AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxDEV","_jsxDEV","AuthForm","_s","isLogin","setIsLogin","username","setUsername","password","setPassword","bgGif","setBgGif","navigate","gifList","randomGif","Math","floor","random","length","document","documentElement","style","setProperty","handleSubmit","e","preventDefault","endpoint","res","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","data","json","ok","alert","error","localStorage","setItem","token","userRes","Authorization","user","preference","Object","values","every","val","err","console","message","className","background","backgroundSize","minHeight","display","justifyContent","alignItems","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","onClick","color","cursor","_c","$RefreshReg$"],"sources":["C:/Users/Huaweı/VS_CODE/film-dizi-oneri-sitesi-main/film-dizi-oneri-sitesi-main/Frontend/src/components/AuthForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/AuthForm.css\";\n\nconst AuthForm = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [bgGif, setBgGif] = useState(\"\");\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const gifList = [\n      \"https://i.gifer.com/3Yws.gif\",\n      \"https://i.gifer.com/YCZX.gif\",\n      \"https://i.gifer.com/origin/34/34f7fc2208fc7ed7b53b4b12d7858f3a.gif\",\n      \"https://media.giphy.com/media/xT0GqeSlGSRQut4jD6/giphy.gif\",\n      \"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif\",\n      \"https://media.giphy.com/media/JWuBH9rCO2uZuHBFpm/giphy.gif\",\n      \"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif\",\n      \"https://media.giphy.com/media/q7Up7ioB3Uqzq/giphy.gif\"\n    ];\n    const randomGif = gifList[Math.floor(Math.random() * gifList.length)];\n    document.documentElement.style.setProperty(\"--bg-gif\", `url(${randomGif})`);\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const endpoint = isLogin ? \"login\" : \"register\";\n\n    try {\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ username, password }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        alert(data.error || \"Bir hata oluştu.\");\n        return;\n      }\n\n      if (!isLogin) {\n        alert(\"Kayıt başarılı! Giriş yapabilirsiniz.\");\n        setIsLogin(true);\n        return;\n      }\n\n      localStorage.setItem(\"token\", data.token);\n\n      // Kullanıcı verisini çek\n      const userRes = await fetch(`${process.env.REACT_APP_API_URL}/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`,\n        },\n      });\n\n      const user = await userRes.json();\n\n      if (!user.preference || Object.values(user.preference).every(val => val === 0)) {\n        navigate(\"/choose-films\");\n      } else {\n        navigate(\"/home\");\n      }\n\n    } catch (err) {\n  console.error(\"🛑 Yakalanan hata:\", err);\n  alert(\"Sunucu hatası: \" + err.message);\n}\n\n\n    setUsername(\"\");\n    setPassword(\"\");\n  };\n\n  return (\n    <div\n      className=\"auth-body\"\n      style={{\n        background: `url(${bgGif}) no-repeat center center fixed`,\n        backgroundSize: \"cover\",\n        minHeight: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <div className=\"auth-container\">\n        <h2>{isLogin ? \"Giriş Yap\" : \"Kayıt Ol\"}</h2>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            placeholder=\"Kullanıcı Adı\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Şifre\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n          <button type=\"submit\">{isLogin ? \"Giriş Yap\" : \"Kayıt Ol\"}</button>\n        </form>\n        <p>\n          {isLogin ? \"Hesabınız yok mu?\" : \"Zaten hesabınız var mı?\"}{\" \"}\n          <span\n            onClick={() => setIsLogin(!isLogin)}\n            style={{ color: \"#00ffff\", cursor: \"pointer\" }}\n          >\n            {isLogin ? \"Kayıt Ol\" : \"Giriş Yap\"}\n          </span>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}